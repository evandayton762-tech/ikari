import{j as s}from"./jsx-runtime-0DLF9kdB.js";import{r as c}from"./components-CZEx2DQX.js";import{u as T,a as g,T as m,b as v,C as w,S as C,c as O}from"./react-three-fiber.esm-B63sD3nm.js";const d=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!="function";function p(e,u){const i=T(a=>a.gl),n=g(m,d(e)?Object.values(e):e);return c.useLayoutEffect(()=>{u==null||u(n)},[u]),c.useEffect(()=>{if("initTexture"in i){let a=[];Array.isArray(n)?a=n:n instanceof v?a=[n]:d(n)&&(a=Object.values(n)),a.forEach(f=>{f instanceof v&&i.initTexture(f)})}},[i,n]),c.useMemo(()=>{if(d(e)){const a={};let f=0;for(const x in e)a[x]=n[f++];return a}else return n},[e,n])}p.preload=e=>g.preload(m,e);p.clear=e=>g.clear(m,e);function A({url:e,depth:u=.08}){const i=p(e);i.colorSpace=C,i.anisotropy=8;const n=c.useMemo(()=>{const t=i.image;if(!(t!=null&&t.width)||!(t!=null&&t.height))return[1,1,1];const r=t.width/t.height;return r>=1?[r,1,1]:[1,1/r,1]},[i.image]),h=c.useRef(),a=c.useRef({vx:0,vy:0,dragging:!1,px:0,py:0}),[f,x]=c.useState(!1);O(()=>{const t=h.current;if(!t)return;const r=a.current;r.dragging||(r.vx*=.92,r.vy*=.92,t.rotation.y+=r.vx,t.rotation.x+=r.vy,t.rotation.x*=.96,t.rotation.y*=.96),t.rotation.x=Math.max(-.5,Math.min(.5,t.rotation.x)),t.rotation.y=Math.max(-.6,Math.min(.6,t.rotation.y))});function b(t){var o,l;t.stopPropagation();const r=a.current;r.dragging=!0,r.px=t.clientX,r.py=t.clientY,(l=(o=t.target).setPointerCapture)==null||l.call(o,t.pointerId)}function M(t){const r=h.current;if(!r)return;const o=a.current;if(!o.dragging)return;const l=t.clientX-o.px,P=t.clientY-o.py;o.px=t.clientX,o.py=t.clientY;const y=l*.005,j=P*.005;r.rotation.y+=y,r.rotation.x+=j,o.vx=y,o.vy=j}function S(t){var o,l;const r=a.current;r.dragging=!1,(l=(o=t.target).releasePointerCapture)==null||l.call(o,t.pointerId)}return s.jsx("group",{ref:h,scale:n,onPointerDown:b,onPointerMove:M,onPointerUp:S,onPointerOver:()=>x(!0),onPointerOut:()=>x(!1),children:s.jsxs("mesh",{children:[s.jsx("boxGeometry",{args:[1,1,u,1,1,1]}),s.jsx("meshStandardMaterial",{attach:"material-0",color:"#2b2b2b",roughness:.95,metalness:0}),s.jsx("meshStandardMaterial",{attach:"material-1",color:"#2b2b2b",roughness:.95,metalness:0}),s.jsx("meshStandardMaterial",{attach:"material-2",color:"#303030",roughness:.95,metalness:0}),s.jsx("meshStandardMaterial",{attach:"material-3",color:"#202020",roughness:.95,metalness:0}),s.jsx("meshBasicMaterial",{attach:"material-4",map:i,toneMapped:!1}),s.jsx("meshStandardMaterial",{attach:"material-5",color:"#111111",roughness:.95,metalness:0})]})})}function Y({textureUrl:e,width:u,height:i}){return s.jsxs(w,{style:{width:"100%",height:"100%",cursor:"grab"},gl:{alpha:!0,antialias:!0,preserveDrawingBuffer:!1},dpr:[1,1.5],camera:{position:[0,0,2],fov:50},children:[s.jsx(c.Suspense,{fallback:null,children:s.jsx(A,{url:e})}),s.jsx("ambientLight",{intensity:.9}),s.jsx("directionalLight",{position:[2,2,3],intensity:.35})]})}export{Y as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductScene.client-B5bgs-fn.js","assets/jsx-runtime-0DLF9kdB.js","assets/components-CZEx2DQX.js","assets/react-three-fiber.esm-B63sD3nm.js"])))=>i.map(i=>d[i]);
import{_ as H}from"./preload-helper-ckwbz45p.js";import{j as n}from"./jsx-runtime-0DLF9kdB.js";import{r as h,u as M,z as B}from"./components-CZEx2DQX.js";import{j as F,q as Q,s as q}from"./index-Don8BO6t.js";import{u as X,P as J}from"./ProductPrice-ByvFHxrT.js";import"./Money-DBnmQhIx.js";const R=",",b={OPTION:":",END_OF_PREFIX:",",SEQUENCE_GAP:" ",RANGE:"-"},L=(()=>{const e=new Map;return function(t,r){var i;if(t.length===0)return!1;if(!e.has(r)){const o=new Set;for(const s of G(r)){o.add(s.join(R));for(let a=0;a<s.length;a++)o.add(s.slice(0,a+1).join(R))}e.set(r,o)}return!!((i=e.get(r))!=null&&i.has(t.join(R)))}})();function G(e){if(!e)return[];if(e.startsWith("v1_"))return Y(W(e));throw new Error("Unsupported option value encoding")}const W=e=>e.replace(/^v1_/,"");function Y(e){const t=/[ :,-]/g;let r=0,i;const o=[],s=[];let a=0,l=null;for(;i=t.exec(e);){const d=i[0],u=Number.parseInt(e.slice(r,i.index))||0;if(l!==null){for(;l<u;l++)s[a]=l,o.push([...s]);l=null}s[a]=u,d===b.RANGE?l=u:d===b.OPTION?a++:((d===b.SEQUENCE_GAP||d===b.END_OF_PREFIX&&e[i.index-1]!==b.END_OF_PREFIX)&&o.push([...s]),d===b.END_OF_PREFIX&&(s.pop(),a--)),r=t.lastIndex}const p=e.match(/\d+$/g);if(p){const d=parseInt(p[0]);if(l!=null)for(;l<=d;l++)s[a]=l,o.push([...s]);else o.push([d])}return o}function Z(e){return Object.assign({},...e.map(t=>({[t.name]:Object.assign({},...t!=null&&t.optionValues?t.optionValues.map((r,i)=>({[r.name]:i})):[])})))}function A(e){return Object.assign({},...e.map(t=>({[t.name]:t.value})))}function T(e){return JSON.stringify(A(e))}function D(e){return Array.isArray(e)?JSON.stringify(Object.assign({},...e.map(t=>({[t.name]:t.value})))):JSON.stringify(e)}function ee(e,t){return Object.keys(e).map(i=>t[i]?t[i][e[i]]:null).filter(i=>i!==null)}function te(e){return Object.assign({},...e.map(t=>({[D(t.selectedOptions||[])]:t})))}const z=["options","selectedOrFirstAvailableVariant","adjacentVariants"],ne=["handle","encodedVariantExistence","encodedVariantAvailability"];function g(e){return console.error(`[h2:error:getProductOptions] product.${e} is missing. Make sure you query for this field from the Storefront API.`),!1}function $(e,t=!1){var r;let i=!0;const o=Object.keys(e);if((t?[...z,...ne]:z).forEach(s=>{o.includes(s)||(i=g(s))}),e.options){const s=e==null?void 0:e.options[0];if(t&&!(s!=null&&s.name)&&(i=g("options.name")),(r=e==null?void 0:e.options[0])!=null&&r.optionValues){let a=e.options[0].optionValues[0];t&&!(a!=null&&a.name)&&(i=g("options.optionValues.name")),a=e.options[0].optionValues.filter(l=>!!(l!=null&&l.firstSelectableVariant))[0],a!=null&&a.firstSelectableVariant&&(i=w(a.firstSelectableVariant,"options.optionValues.firstSelectableVariant",i,t))}else i=g("options.optionValues")}return e.selectedOrFirstAvailableVariant&&(i=w(e.selectedOrFirstAvailableVariant,"selectedOrFirstAvailableVariant",i,t)),e.adjacentVariants&&e.adjacentVariants[0]&&(i=w(e.adjacentVariants[0],"adjacentVariants",i,t)),i?e:{}}function w(e,t,r,i){var o;let s=r;if(i&&!((o=e.product)!=null&&o.handle)&&(s=g(`${t}.product.handle`)),e.selectedOptions){const a=e.selectedOptions[0];a!=null&&a.name||(s=g(`${t}.selectedOptions.name`)),a!=null&&a.value||(s=g(`${t}.selectedOptions.value`))}else s=g(`${t}.selectedOptions`);return s}function ie(e){const t=$(e);if(!t.options)return[];const r={};t.options.map(o=>{var s;(s=o.optionValues)==null||s.map(a=>{if(a.firstSelectableVariant){const l=T(a.firstSelectableVariant.selectedOptions);r[l]=a.firstSelectableVariant}})}),t.adjacentVariants.map(o=>{const s=T(o.selectedOptions);r[s]=o});const i=t.selectedOrFirstAvailableVariant;if(i){const o=T(i.selectedOptions);r[o]=i}return Object.values(r)}function re(e){const t=$(e,!0);if(!t.options)return[];const{options:r,selectedOrFirstAvailableVariant:i,adjacentVariants:o,encodedVariantExistence:s,encodedVariantAvailability:a,handle:l}=t,p=i==null?void 0:i.selectedOptions.map(m=>m.name),d=r.filter(m=>p&&p.indexOf(m.name)>=0),u=Z(r),v=te(i?[i,...o]:o),j=A(i?i.selectedOptions:[]);return d.map((m,V)=>({...m,optionValues:m.optionValues.map(x=>{var O;const y={...j};y[m.name]=x.name;const c=D(y||[]),S=ee(y||[],u).slice(0,V+1),f=L(S,s||""),I=L(S,a||""),P=v[c]||x.firstSelectableVariant;let k={};P&&(k=A(P.selectedOptions||[]));const K=new URLSearchParams(k),U=((O=P==null?void 0:P.product)==null?void 0:O.handle)||l;return{...x,variant:P,handle:U,variantUriQuery:K.toString(),selected:j[m.name]===x.name,exists:f,available:I,isDifferentProduct:U!==l}})}))}function ae(e){return h.useEffect(()=>{const t=new URLSearchParams(A(e||[])),r=new URLSearchParams(window.location.search),i=new URLSearchParams({...Object.fromEntries(r),...Object.fromEntries(t)});i.size>0&&window.history.replaceState({},"",`${window.location.pathname}?${i.toString()}`)},[JSON.stringify(e)]),null}function se({analytics:e,children:t,disabled:r,lines:i,onClick:o}){return n.jsx(F,{route:"/cart",inputs:{lines:i},action:F.ACTIONS.LinesAdd,children:s=>n.jsxs(n.Fragment,{children:[n.jsx("input",{name:"analytics",type:"hidden",value:JSON.stringify(e)}),n.jsx("button",{type:"submit",onClick:o,disabled:r??s.state!=="idle",children:t})]})})}const oe=h.lazy(()=>H(()=>import("./ProductScene.client-B5bgs-fn.js"),__vite__mapDeps([0,1,2,3]))),he=({data:e})=>[{title:`Hydrogen | ${(e==null?void 0:e.product.title)??""}`},{rel:"canonical",href:`/products/${e==null?void 0:e.product.handle}`}];function xe(){var j,E,m,V,x,O,y;const{product:e}=M(),t=Q(e.selectedOrFirstAvailableVariant,ie(e));ae(t.selectedOptions);const r=re({...e,selectedOrFirstAvailableVariant:t}),{title:i,descriptionHtml:o}=e,s=((j=t==null?void 0:t.image)==null?void 0:j.url)||((E=e==null?void 0:e.featuredImage)==null?void 0:E.url),a=B(),{open:l}=X(),[p,d]=h.useState(1),u=h.useMemo(()=>r.find(c=>c.name.toLowerCase()==="size"),[r]);function v(c){const N=c.target.value,S=u;if(!S)return;const f=S.optionValues.find(I=>I.name===N);f&&f.exists&&(f.isDifferentProduct?a(`/products/${f.handle}?${f.variantUriQuery}`,{replace:!0,preventScrollReset:!0}):f.selected||a(`?${f.variantUriQuery}`,{replace:!0,preventScrollReset:!0}))}return n.jsxs("div",{style:{minHeight:"100vh",background:"#000",color:"#fff",display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"2rem",padding:"3rem",alignItems:"start"},children:[n.jsx("div",{style:{border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",padding:"1rem",background:"#0d0d0d"},children:n.jsx("div",{style:{width:"100%",aspectRatio:"1 / 1",maxHeight:"70vh"},children:n.jsx(h.Suspense,{fallback:n.jsx("div",{style:{padding:"2rem",color:"#888"},children:"Loading…"}),children:s?n.jsx(oe,{textureUrl:s}):n.jsx("div",{style:{padding:"2rem",color:"#888"},children:"No image"})})})}),n.jsxs("div",{style:{padding:"0 0.5rem"},children:[n.jsx("h1",{style:{margin:0,fontFamily:"monospace",textTransform:"uppercase",letterSpacing:"0.12em",fontSize:"2rem"},children:i}),n.jsx("div",{style:{opacity:.7,marginTop:".25rem"},children:e.vendor}),n.jsx("div",{style:{marginTop:"1.25rem",fontSize:"1.25rem"},children:n.jsx(J,{price:t==null?void 0:t.price,compareAtPrice:t==null?void 0:t.compareAtPrice})}),n.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"10px",background:"rgba(255,255,255,0.02)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".75rem"},children:[n.jsx("div",{style:{opacity:.7,fontSize:".85rem",width:72},children:"Quantity"}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8},children:[n.jsx("button",{type:"button",onClick:()=>d(c=>Math.max(1,c-1)),style:stepBtn,children:"−"}),n.jsx("div",{style:{minWidth:36,textAlign:"center"},children:p}),n.jsx("button",{type:"button",onClick:()=>d(c=>c+1),style:stepBtn,children:"+"})]})]}),u?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".75rem",marginTop:"0.75rem"},children:[n.jsx("div",{style:{opacity:.7,fontSize:".85rem",width:72},children:"Size"}),n.jsx("select",{onChange:v,value:(m=u.optionValues.find(c=>c.selected))==null?void 0:m.name,style:{background:"transparent",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",padding:"0.5rem 0.75rem",borderRadius:8},children:u.optionValues.map(c=>n.jsxs("option",{value:c.name,disabled:!c.exists,style:{color:"#000"},children:[c.name,c.available?"":" (unavailable)"]},c.name))})]}):null,n.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.9rem"},children:[n.jsx(se,{disabled:!t||!t.availableForSale,onClick:()=>l("cart"),lines:t?[{merchandiseId:t.id,quantity:p}]:[],children:t!=null&&t.availableForSale?"Add to Cart":"Sold Out"}),n.jsx(le,{productId:e.id})]})]}),n.jsx(_,{label:"Description",defaultOpen:!0,children:n.jsx("div",{dangerouslySetInnerHTML:{__html:o}})}),n.jsx(_,{label:"Materials",children:n.jsx(C,{html:(V=e==null?void 0:e.metafield)==null?void 0:V.value,fallbacks:[(x=e==null?void 0:e.metafield_materials)==null?void 0:x.value]})}),n.jsx(_,{label:"Care & Hanging",children:n.jsx(C,{html:(O=e==null?void 0:e.metafield_care)==null?void 0:O.value})}),n.jsx(_,{label:"Delivery & Returns",children:n.jsx(C,{html:(y=e==null?void 0:e.metafield_delivery_returns)==null?void 0:y.value})})]}),n.jsx(q.ProductView,{data:{products:[{id:e.id,title:e.title,price:(t==null?void 0:t.price.amount)||"0",vendor:e.vendor,variantId:(t==null?void 0:t.id)||"",variantTitle:(t==null?void 0:t.title)||"",quantity:1}]}}),n.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"2rem"},children:n.jsx(ce,{product:e})})]})}function C({html:e,fallbacks:t=[]}){const r=e||t.find(Boolean)||"";return r?n.jsx("div",{dangerouslySetInnerHTML:{__html:r}}):n.jsx("div",{style:{opacity:.6},children:"No details yet."})}function _({label:e,children:t,defaultOpen:r=!1}){const[i,o]=h.useState(r);return n.jsxs("div",{style:{marginTop:"1rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[n.jsxs("button",{onClick:()=>o(s=>!s),style:{width:"100%",textAlign:"left",padding:"0.75rem 0",background:"transparent",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{style:{textTransform:"uppercase",letterSpacing:".14em",fontSize:".8rem",opacity:.8},children:e}),n.jsx("span",{style:{opacity:.6},children:i?"–":"+"})]}),n.jsx("div",{style:{maxHeight:i?"800px":0,overflow:"hidden",transition:"max-height .3s ease"},children:n.jsx("div",{style:{padding:"0 0 0.75rem 0",opacity:.9},children:t})})]})}function le({productId:e}){const t=`like:${e}`,[r,i]=h.useState(!1);return h.useEffect(()=>{i(localStorage.getItem(t)==="1")},[t]),n.jsx("button",{type:"button","aria-pressed":r,onClick:()=>{const o=!r;i(o),localStorage.setItem(t,o?"1":"0")},style:{border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"0.5rem 0.75rem",background:"transparent",color:"#fff"},children:r?"♥ Liked":"♡ Like"})}function ce({product:e}){var i,o,s;const t=(o=(i=e==null?void 0:e.collections)==null?void 0:i.nodes)==null?void 0:o[0],r=(((s=t==null?void 0:t.products)==null?void 0:s.nodes)||[]).filter(a=>a.id!==e.id);return r.length?n.jsxs("div",{style:{padding:"1rem 0",borderTop:"1px solid rgba(255,255,255,0.08)"},children:[n.jsxs("div",{style:{textTransform:"uppercase",letterSpacing:".14em",fontSize:".8rem",opacity:.8,marginBottom:".75rem"},children:["More from ",t.title]}),n.jsx("div",{style:{display:"grid",gridAutoFlow:"column",gridAutoColumns:"minmax(220px, 1fr)",gap:"1rem",overflowX:"auto",scrollSnapType:"x mandatory",paddingBottom:".5rem"},children:r.map(a=>{var l,p,d,u,v;return n.jsxs("a",{href:`/products/${a.handle}`,style:{display:"block",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,padding:"0.75rem",background:"rgba(255,255,255,0.02)",textDecoration:"none",color:"#fff",scrollSnapAlign:"start"},children:[((l=a.featuredImage)==null?void 0:l.url)&&n.jsx("img",{src:a.featuredImage.url,alt:a.title,style:{width:"100%",height:180,objectFit:"contain"}}),n.jsx("div",{style:{marginTop:".5rem",fontSize:".9rem"},children:a.title}),n.jsxs("div",{style:{opacity:.8,fontSize:".85rem"},children:[(d=(p=a.priceRange)==null?void 0:p.minVariantPrice)==null?void 0:d.amount," ",(v=(u=a.priceRange)==null?void 0:u.minVariantPrice)==null?void 0:v.currencyCode]})]},a.id)})})]}):null}export{xe as default,he as meta};
